{"version":3,"sources":["app/scripts/node_modules/browserify/node_modules/browser-pack/_prelude.js","app/scripts/main.js"],"names":[],"mappings":"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","file":"app/scripts/bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nlet log = document.querySelector('#log');\n\nfunction addLogStatement (statement) {\n  let p = document.createElement('p');\n  let d = new Date();\n  p.textContent = '' + statement + ' @ ' + [d.getMinutes(), d.getSeconds(), d.getMilliseconds()].join('.');\n  log.appendChild(p);\n}\n\naddLogStatement('initialized');\n\nlet myColor = '#' + (Math.random()*(1<<24)|0).toString(16).slice(-6);\n\n/**********\n SANDBOXING\n **********/\n\n/////// iFrame ////////\n\nlet sandbox = pokey.createSandbox({\n  url         : 'http://127.0.0.1:3000/external.html',\n  type        : 'iframe',\n  capabilities: ['interaction', 'colorChannel'],\n  height: \"500\"\n});\n\nsandbox.connect('colorChannel').then((port) => {\n  addLogStatement('connected on colorChannel');\n\n  port.send('color', myColor);\n});\n\nsandbox.connect('interaction').then(function (port) {\n  addLogStatement('connected on interaction');\n\n  port.onRequest('email', function () {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve({email: 'maxbates@gmail.com'});\n      }, 2000);\n    });\n  });\n\n  document.querySelector('#email-input').addEventListener('keyup', function (event) {\n    addLogStatement('sending');\n    port.send('setEmail', event.target.value);\n  });\n});\n\n//inserting in the DOM actually gets the iFrame going + loads external Pokey client to being handshake\ndocument.getElementById('insertion').appendChild(sandbox.el);\n\n//////web worker //////\n// note that workers must be from the same origin. To use a cross-origin worker, you need to load it into an iFrame.\nlet workerSandbox = pokey.createSandbox({\n  url         : 'remoteWorker.js',\n  type: 'worker',\n  capabilities: ['colorChannel']\n});\n\nworkerSandbox.wiretap((channel, payload) => {\n  console.log('worker wiretap', channel, payload);\n});\n\nworkerSandbox.connect('colorChannel').then((port) => {\n  port.send('workerColor', myColor);\n  port.request('workerMessage').then((msg) => {\n    console.log('worker message received: ' + msg);\n  })\n});\n"]}